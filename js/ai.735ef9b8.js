"use strict";(self["webpackChunkfree_design_system"]=self["webpackChunkfree_design_system"]||[]).push([[741],{3174:function(t,s,i){i.r(s),i.d(s,{default:function(){return x}});var e=function(){var t=this,s=t._self._c;return s("div",[s("v-ai",{attrs:{width:350,height:550,particles:300}})],1)},l=[],h=function(){var t=this,s=t._self._c;return s("div",[s("canvas",{ref:"canvasAI",style:`width: ${t.width}px; height=${t.height}px; border: 1px solid #42a5f0`,attrs:{width:t.width,height:t.height},on:{click:t.clickCell}}),s("br"),s("p",[t._v("Alive: "+t._s(t.alive))]),s("p",[t._v("Total collisions: "+t._s(t.collisions.toLocaleString()))]),s("p",[t._v("Heavy collisions: "+t._s(t.heavyCollisions.toLocaleString()))]),s("p",[t._v("Heavy percent: "+t._s(t.heavyPercent))]),s("p",[t._v("Last heavy: "+t._s(t.lastHeavy.toFixed(3)))])])},o=[],a=(i(7658),{props:{width:{type:Number,default:100},height:{type:Number,default:100},particles:{type:Number,required:!0}},data(){return{ctx:null,cellWidth:this.width/10,cellHeight:this.height/10,radius:this.width/20,fps:60,timer:null,cells:[],collisions:0,heavyCollisions:0,lastHeavy:0}},methods:{distance(t,s,i,e){const l=i-t,h=e-s;return Math.sqrt(Math.pow(l,2)+Math.pow(h,2))},rotate(t,s){const i={x:t.x*Math.cos(s)-t.y*Math.sin(s),y:t.x*Math.sin(s)+t.y*Math.cos(s)};return i},resolveCollision(t,s){this.collisions+=1;const i=t.velocity.x-s.velocity.x,e=t.velocity.y-s.velocity.y,l=s.x-t.x,h=s.y-t.y;if(i*l+e*h>=0){const i=-Math.atan2(s.y-t.y,s.x-t.x),e=t.mass,l=s.mass,h=this.rotate(t.velocity,i),o=this.rotate(s.velocity,i),a={x:h.x*(e-l)/(e+l)+2*o.x*l/(e+l),y:h.y},r={x:o.x*(e-l)/(e+l)+2*h.x*l/(e+l),y:o.y},c=this.rotate(a,-i),n=this.rotate(r,-i);t.velocity.x=c.x,t.velocity.y=c.y,s.velocity.x=n.x,s.velocity.y=n.y,s.mass<t.mass&&Math.abs(s.velocity.x)<Math.abs(t.velocity.x)&&Math.abs(s.velocity.y)<Math.abs(t.velocity.y)?(s.mass-=s.mass>.03?.01:0,t.mass+=t.mass<5?.01:0,t.color="purple",this.heavyCollisions+=1,this.lastHeavy=Math.round(1e4*t.mass)/1e4):(t.mass-=t.mass>.03?.01:0,s.mass+=s.mass<3?.002:0,t.color=t.mass<.5?"red":"#888888",s.color=s.mass<.5?"red":"#888888")}},fill({x:t,y:s,color:i,radius:e}){e<0||(this.ctx.fillStyle=i,this.ctx.beginPath(),this.ctx.arc(t,s,e,0,2*e*Math.PI),this.ctx.fill(),this.ctx.closePath())},clickCell(t){const s=this.$refs.canvasAI.getBoundingClientRect(),i={left:s.left,top:s.top},e=1,l=2*e,h=t.x-i.left,o=t.y-i.top,a={x:h,y:o,color:"#888888",velocity:{x:10*Math.random()-5,y:10*Math.random()-5},mass:e,radius:l};return!(h<l||h>=this.width-l)&&(!(o<l||o>=this.height-l)&&(this.fill(a),void this.cells.push(a)))},render(){this.timer=setTimeout((()=>{this.ctx.fillStyle="#fff",this.ctx.fillRect(0,0,this.width,this.height);for(let t=0;t<this.cells.length;t++)for(let s=0;s<this.cells.length;s++){const i=this.cells[t],e=this.cells[s];i!==e&&(this.distance(i.x,i.y,e.x,e.y)<=i.radius+e.radius&&(this.resolveCollision(i,e),i.radius=2*i.mass,e.radius=2*e.mass))}this.cells.forEach((t=>{const{x:s,y:i,velocity:e}=t;let l=s+e.x,h=i+e.y;l<t.radius&&(l=t.radius,t.velocity.x=-t.velocity.x),l>=this.width-t.radius&&(l=this.width-t.radius,t.velocity.x=-t.velocity.x),h<t.radius&&(h=t.radius,t.velocity.y=-t.velocity.y),h>=this.height-t.radius&&(h=this.height-t.radius,t.velocity.y=-t.velocity.y),t.x=l,t.y=h,t.velocity.x=t.velocity.x>3?3:t.velocity.x,t.velocity.y=t.velocity.y>3?3:t.velocity.y,this.fill(t),t.mass<.3&&(console.log(t.id),this.cells=this.cells.filter((s=>s!==t)))})),window.requestAnimationFrame(this.render)}),1e3/this.fps)},randomIntFromInterval(t,s){return Math.floor(Math.random()*(s-t+1)+t)},generateRandom(t){for(let s=0;s<t;s++){const t=1,i=2*t,e=this.randomIntFromInterval(this.cellWidth,this.width-this.cellWidth),l=this.randomIntFromInterval(this.cellHeight,this.height-this.cellHeight),h={x:e,y:l,color:"#888888",velocity:{x:10*Math.random()-5,y:10*Math.random()-5},mass:t,radius:i,id:s};if(e<i||e>=this.width-i)return!1;if(l<i||l>=this.height-i)return!1;this.fill(h),this.cells.push(h)}}},mounted(){this.ctx=this.$refs.canvasAI.getContext("2d"),this.generateRandom(this.particles),this.render()},computed:{alive(){return this.cells.length},heavyPercent(){return Math.round(this.heavyCollisions/this.collisions*100)/100+"%"}}}),r=a,c=i(1001),n=(0,c.Z)(r,h,o,!1,null,"3d664cad",null),y=n.exports,d={components:{VAi:y}},v=d,u=(0,c.Z)(v,e,l,!1,null,"38a07610",null),x=u.exports}}]);
//# sourceMappingURL=ai.735ef9b8.js.map