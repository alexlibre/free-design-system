"use strict";(self["webpackChunkfree_design_system"]=self["webpackChunkfree_design_system"]||[]).push([[741],{8639:function(t,s,i){i.r(s),i.d(s,{default:function(){return m}});var e=function(){var t=this,s=t._self._c;return s("div",[s("v-ai",{attrs:{width:350,height:550,particles:300}})],1)},l=[],a=function(){var t=this,s=t._self._c;return s("div",[s("canvas",{ref:"canvasAI",style:`width: ${t.width}px; height=${t.height}px; border: 1px solid #42a5f0`,attrs:{width:t.width,height:t.height},on:{click:t.clickCell}}),s("br"),s("p",[t._v("Alive: "+t._s(t.alive))]),s("p",[t._v("Total collisions: "+t._s(t.collisions.toLocaleString()))]),s("p",[t._v("Heavy collisions: "+t._s(t.heavyCollisions.toLocaleString()))]),s("p",[t._v("Heavy percent: "+t._s(t.heavyPercent))]),s("p",[t._v("Last heavy: "+t._s(t.lastHeavy.toFixed(3)))])])},h=[],o=(i(7658),{props:{width:{type:Number,default:100},height:{type:Number,default:100},particles:{type:Number,required:!0}},data(){return{ctx:null,cellWidth:this.width/10,cellHeight:this.height/10,radius:this.width/20,fps:60,timer:null,cells:[],collisions:0,heavyCollisions:0,lastHeavy:0}},methods:{distance(t,s,i,e){const l=i-t,a=e-s;return Math.sqrt(Math.pow(l,2)+Math.pow(a,2))},rotate(t,s){const i={x:t.x*Math.cos(s)-t.y*Math.sin(s),y:t.x*Math.sin(s)+t.y*Math.cos(s)};return i},resolveCollision(t,s){this.collisions+=1;const i=t.velocity.x-s.velocity.x,e=t.velocity.y-s.velocity.y,l=s.x-t.x,a=s.y-t.y;if(i*l+e*a>=0){const i=-Math.atan2(s.y-t.y,s.x-t.x),e=t.mass,l=s.mass,a=this.rotate(t.velocity,i),h=this.rotate(s.velocity,i),o={x:a.x*(e-l)/(e+l)+2*h.x*l/(e+l),y:a.y},r={x:h.x*(e-l)/(e+l)+2*a.x*l/(e+l),y:h.y},c=this.rotate(o,-i),n=this.rotate(r,-i);s.mass<t.mass&&Math.abs(s.velocity.x)<Math.abs(t.velocity.x)&&Math.abs(s.velocity.y)<Math.abs(t.velocity.y)?(s.mass-=s.mass>.03?s.mass/10:0,t.mass+=t.mass<50?s.mass/10:0,t.color="purple",this.heavyCollisions+=1,this.lastHeavy=Math.round(1e4*t.mass)/1e4):s.mass>t.mass&&Math.abs(s.velocity.x)>Math.abs(t.velocity.x)&&Math.abs(s.velocity.y)>Math.abs(t.velocity.y)?(t.mass-=t.mass>.03?t.mass/10:0,s.mass+=s.mass<50?t.mass/10:0,s.color="purple",this.heavyCollisions+=1,this.lastHeavy=Math.round(1e4*s.mass)/1e4):(t.mass-=t.mass>.03?.01:0,s.mass+=s.mass<3?.002:0,t.color=t.mass<.5?"red":"#888888",s.color=s.mass<.5?"red":"#888888"),t.velocity.x=c.x,t.velocity.y=c.y,s.velocity.x=n.x,s.velocity.y=n.y}},fill({x:t,y:s,color:i,radius:e}){e<0||(this.ctx.fillStyle=i,this.ctx.beginPath(),this.ctx.arc(t,s,e,0,2*e*Math.PI),this.ctx.fill(),this.ctx.closePath())},clickCell(t){const s=this.$refs.canvasAI.getBoundingClientRect(),i={left:s.left,top:s.top},e=1,l=2*e,a=t.x-i.left,h=t.y-i.top,o={x:a,y:h,color:"#888888",velocity:{x:10*Math.random()-5,y:10*Math.random()-5},mass:e,radius:l};return!(a<l||a>=this.width-l)&&(!(h<l||h>=this.height-l)&&(this.fill(o),void this.cells.push(o)))},render(){this.timer=setTimeout((()=>{this.ctx.fillStyle="#fff",this.ctx.fillRect(0,0,this.width,this.height);for(let t=0;t<this.cells.length;t++)for(let s=0;s<this.cells.length;s++){const i=this.cells[t],e=this.cells[s];i!==e&&(this.distance(i.x,i.y,e.x,e.y)<=i.radius+e.radius&&(this.resolveCollision(i,e),i.radius=2*i.mass,e.radius=2*e.mass))}this.cells.forEach((t=>{const{x:s,y:i,velocity:e}=t;let l=s+e.x,a=i+e.y;l<t.radius&&(l=t.radius,t.velocity.x=-t.velocity.x),l>=this.width-t.radius&&(l=this.width-t.radius,t.velocity.x=-t.velocity.x),a<t.radius&&(a=t.radius,t.velocity.y=-t.velocity.y),a>=this.height-t.radius&&(a=this.height-t.radius,t.velocity.y=-t.velocity.y),t.x=l,t.y=a,t.velocity.x=t.velocity.x>3?3:t.velocity.x,t.velocity.y=t.velocity.y>3?3:t.velocity.y,this.fill(t),t.mass<.3&&(console.log(t.id),this.cells=this.cells.filter((s=>s!==t)))})),window.requestAnimationFrame(this.render)}),1e3/this.fps)},randomIntFromInterval(t,s){return Math.floor(Math.random()*(s-t+1)+t)},generateRandom(t){for(let s=0;s<t;s++){const t=1,i=2*t,e=this.randomIntFromInterval(this.cellWidth,this.width-this.cellWidth),l=this.randomIntFromInterval(this.cellHeight,this.height-this.cellHeight),a={x:e,y:l,color:"#888888",velocity:{x:10*Math.random()-5,y:10*Math.random()-5},mass:t,radius:i,id:s};if(e<i||e>=this.width-i)return!1;if(l<i||l>=this.height-i)return!1;this.fill(a),this.cells.push(a)}}},mounted(){this.ctx=this.$refs.canvasAI.getContext("2d"),this.generateRandom(this.particles),this.render()},computed:{alive(){return this.cells.length},heavyPercent(){return Math.round(this.heavyCollisions/this.collisions*100)/100+"%"}}}),r=o,c=i(1001),n=(0,c.Z)(r,a,h,!1,null,"106eb538",null),y=n.exports,d={components:{VAi:y}},v=d,u=(0,c.Z)(v,e,l,!1,null,"38a07610",null),m=u.exports}}]);
//# sourceMappingURL=ai.673f6b1d.js.map