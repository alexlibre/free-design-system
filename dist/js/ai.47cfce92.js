"use strict";(self["webpackChunkfree_design_system"]=self["webpackChunkfree_design_system"]||[]).push([[741],{8816:function(t,s,e){e.r(s),e.d(s,{default:function(){return x}});var i=function(){var t=this,s=t._self._c;return s("div",[s("v-ai",{attrs:{width:350,height:450,particles:10}})],1)},a=[],l=function(){var t=this,s=t._self._c;return s("div",[s("canvas",{ref:"canvasAI",style:`width: ${t.width}px; height=${t.height}px; border: 1px solid #42a5f0`,attrs:{width:t.width,height:t.height},on:{click:t.clickCell}}),s("br"),s("p",[t._v(" Alive: "+t._s(t.alive)+" / Born: "+t._s(t.born)+" / Dead: "+t._s(t.dead)+" "),t.ratio?s("span",[t._v("/ Ratio: "+t._s(t.ratio))]):t._e()]),s("p",[t._v("Total collisions: "+t._s(t.collisions.toLocaleString()))]),s("p",[t._v("Heavy collisions: "+t._s(t.heavyCollisions.toLocaleString()))]),s("p",[t._v("Heavy percent: "+t._s(t.heavyPercent))]),s("p",[t._v("Most heavy: "+t._s(t.mostHeavy.toFixed(3)))])])},h=[],o=(e(7658),{props:{width:{type:Number,default:100},height:{type:Number,default:100},particles:{type:Number,required:!0}},data(){return{ctx:null,cellWidth:this.width/10,cellHeight:this.height/10,radius:this.width/20,fps:60,timer:null,cells:[],collisions:0,heavyCollisions:0,mostHeavy:0,maxMass:10,newId:0,born:0,dead:0}},methods:{distance(t,s,e,i){const a=e-t,l=i-s;return Math.sqrt(Math.pow(a,2)+Math.pow(l,2))},rotate(t,s){const e={x:t.x*Math.cos(s)-t.y*Math.sin(s),y:t.x*Math.sin(s)+t.y*Math.cos(s)};return e},resolveCollision(t,s){t.peace=1,s.peace=1,this.collisions+=1;const e=t.velocity.x-s.velocity.x,i=t.velocity.y-s.velocity.y,a=s.x-t.x,l=s.y-t.y;if(e*a+i*l>=0){const e=-Math.atan2(s.y-t.y,s.x-t.x),i=t.mass,a=s.mass,l=this.rotate(t.velocity,e),h=this.rotate(s.velocity,e),o={x:l.x*(i-a)/(i+a)+2*h.x*a/(i+a),y:l.y},r={x:h.x*(i-a)/(i+a)+2*l.x*a/(i+a),y:h.y},c=this.rotate(o,-e),n=this.rotate(r,-e);s.mass<t.mass&&Math.sqrt(Math.pow(s.velocity.x,2)+Math.pow(s.velocity.y,2))<Math.sqrt(Math.pow(t.velocity.x,2)+Math.pow(t.velocity.y,2))?(s.mass-=s.mass>.03?s.mass/10:0,t.mass+=t.mass<this.maxMass?s.mass/20:0,n.x<0&&(n.x-=1/s.mass*2),n.x>0&&(n.x+=1/s.mass*2),n.y<0&&(n.y-=1/s.mass*2),n.y>0&&(n.y+=1/s.mass*2),this.heavyCollisions+=1):s.mass>t.mass&&Math.sqrt(Math.pow(s.velocity.x,2)+Math.pow(s.velocity.y,2))>Math.sqrt(Math.pow(t.velocity.x,2)+Math.pow(t.velocity.y,2))?(t.mass-=t.mass>.03?t.mass/10:0,s.mass+=s.mass<this.maxMass?t.mass/20:0,c.x<0&&(c.x-=1/t.mass*2),c.x>0&&(c.x+=1/t.mass*2),c.y<0&&(c.y-=1/t.mass*2),c.y>0&&(c.y+=1/t.mass*2),this.heavyCollisions+=1,this.mostHeavy=Math.max(Math.round(1e4*s.mass)/1e4,this.mostHeavy)):(t.mass-=t.mass>.03?.01:0,s.mass+=s.mass<3?.002:0,t.color=t.mass<1?"red":t.color,s.color=s.mass<1?"red":s.color),t.velocity.x=c.x,t.velocity.y=c.y,s.velocity.x=n.x,s.velocity.y=n.y;const y=Math.max(t.mass,s.mass);this.mostHeavy=Math.max(Math.round(1e4*y)/1e4,this.mostHeavy)}},fill({x:t,y:s,color:e,radius:i}){i<0||(this.ctx.fillStyle=e,this.ctx.beginPath(),this.ctx.arc(t,s,i,0,2*i*Math.PI),this.ctx.fill(),this.ctx.closePath())},clickCell(t){this.newId+=1;const s=this.$refs.canvasAI.getBoundingClientRect(),e={left:s.left,top:s.top},i=1,a=2*i,l=t.x-e.left,h=t.y-e.top,o={x:l,y:h,color:"#888888",velocity:{x:10*Math.random()-5,y:10*Math.random()-5},mass:i,radius:a,id:this.newId,peace:1};return!(l<a||l>=this.width-a)&&(!(h<a||h>=this.height-a)&&(this.fill(o),void this.cells.push(o)))},render(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.ctx.fillStyle="#fff",this.ctx.fillRect(0,0,this.width,this.height);for(let t=0;t<this.cells.length;t++){const s=this.cells[t];if(s.peace+=1,s.mass>=1&&(s.color="#888888"),s.peace>500*s.mass){s.peace=1;const t=s.x,e=s.y,i={x:-1*s.velocity.x+Math.random(),y:-1*s.velocity.y+Math.random()};this.createNewCell(s.mass,i,t,e),this.born+=1}for(let t=0;t<this.cells.length;t++){const e=s,i=this.cells[t];e!==i&&(this.distance(e.x,e.y,i.x,i.y)<=e.radius+i.radius&&(this.resolveCollision(e,i),e.radius=2*e.mass,i.radius=2*i.mass))}}this.cells.forEach((t=>{const{x:s,y:e,velocity:i}=t;let a=s+i.x,l=e+i.y;a<t.radius&&(a=t.radius,t.velocity.x=-t.velocity.x),a>=this.width-t.radius&&(a=this.width-t.radius,t.velocity.x=-t.velocity.x),l<t.radius&&(l=t.radius,t.velocity.y=-t.velocity.y),l>=this.height-t.radius&&(l=this.height-t.radius,t.velocity.y=-t.velocity.y),t.x=a,t.y=l,t.velocity.x=t.velocity.x>3?3:t.velocity.x,t.velocity.y=t.velocity.y>3?3:t.velocity.y,this.fill(t),t.mass<.5&&(this.cells=this.cells.filter((s=>s!==t)),this.dead+=1),t.mass>5&&(t.mass/=2,this.createNewCell(t.mass),this.born+=1,this.mostHeavy=Math.max(...this.cells.map((t=>t.mass))))})),window.requestAnimationFrame(this.render)}),1e3/this.fps)},randomIntFromInterval(t,s){return Math.floor(Math.random()*(s-t+1)+t)},createNewCell(t,s,e,i){this.newId+=1;const a=1,l=2*t,h=s||{x:2*Math.random()-1,y:2*Math.random()-1},o=e||this.randomIntFromInterval(this.cellWidth,this.width-this.cellWidth),r=i||this.randomIntFromInterval(this.cellHeight,this.height-this.cellHeight),c={x:o,y:r,color:this.newId>this.particles?"green":"#888888",velocity:h,mass:t,radius:l,id:this.newId,peace:a};return!(o<l||o>=this.width-l)&&(!(r<l||r>=this.height-l)&&(this.fill(c),void this.cells.push(c)))},generateRandom(t){for(let s=0;s<t;s++)this.createNewCell(2)}},mounted(){this.ctx=this.$refs.canvasAI.getContext("2d"),this.generateRandom(this.particles),this.render()},computed:{alive(){return this.cells.length},heavyPercent(){return Math.round(this.heavyCollisions/this.collisions*100)+"%"},ratio(){return this.dead>0?(this.born/this.dead).toFixed(4):null}}}),r=o,c=e(1001),n=(0,c.Z)(r,l,h,!1,null,"2bbe4802",null),y=n.exports,d={components:{VAi:y}},m=d,v=(0,c.Z)(m,i,a,!1,null,"2513bf81",null),x=v.exports}}]);
//# sourceMappingURL=ai.47cfce92.js.map