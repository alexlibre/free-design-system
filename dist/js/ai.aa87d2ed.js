"use strict";(self["webpackChunkfree_design_system"]=self["webpackChunkfree_design_system"]||[]).push([[741],{9591:function(t,i,s){s.r(i),s.d(i,{default:function(){return v}});var e=function(){var t=this,i=t._self._c;return i("div",[i("v-ai",{attrs:{width:350,height:550}})],1)},l=[],h=function(){var t=this,i=t._self._c;return i("div",[i("canvas",{ref:"canvasAI",style:`width: ${t.width}px; height=${t.height}px; border: 1px solid #42a5f0`,attrs:{width:t.width,height:t.height},on:{click:t.clickCell}}),i("br"),i("p",[t._v("Alive: "+t._s(t.alive))])])},o=[],r=(s(7658),{props:{width:{type:Number,default:100},height:{type:Number,default:100}},data(){return{ctx:null,cellWidth:this.width/10,cellHeight:this.height/10,radius:this.width/20,fps:60,timer:null,cells:[]}},methods:{distance(t,i,s,e){const l=s-t,h=e-i;return Math.sqrt(Math.pow(l,2)+Math.pow(h,2))},rotate(t,i){const s={x:t.x*Math.cos(i)-t.y*Math.sin(i),y:t.x*Math.sin(i)+t.y*Math.cos(i)};return s},resolveCollision(t,i){console.log("resolver");const s=t.velocity.x-i.velocity.x,e=t.velocity.y-i.velocity.y,l=i.x-t.x,h=i.y-t.y;if(s*l+e*h>=0){const s=-Math.atan2(i.y-t.y,i.x-t.x),e=t.mass,l=i.mass,h=this.rotate(t.velocity,s),o=this.rotate(i.velocity,s),r={x:h.x*(e-l)/(e+l)+2*o.x*l/(e+l),y:h.y},a={x:o.x*(e-l)/(e+l)+2*h.x*l/(e+l),y:o.y},c=this.rotate(r,-s),n=this.rotate(a,-s);t.velocity.x=c.x,t.velocity.y=c.y,i.velocity.x=n.x,i.velocity.y=n.y}},fill({x:t,y:i,color:s,radius:e}){e<0||(this.ctx.fillStyle=s,this.ctx.beginPath(),this.ctx.arc(t,i,e,0,2*e*Math.PI),this.ctx.fill(),this.ctx.closePath())},clickCell(t){const i=this.$refs.canvasAI.getBoundingClientRect(),s={left:i.left,top:i.top},e=1,l=2*e,h=t.x-s.left,o=t.y-s.top,r={x:h,y:o,color:"#888888",velocity:{x:10*Math.random()-5,y:10*Math.random()-5},mass:e,radius:l};return!(h<l||h>=this.width-l)&&(!(o<l||o>=this.height-l)&&(this.fill(r),void this.cells.push(r)))},render(){this.timer=setTimeout((()=>{this.ctx.fillStyle="#fff",this.ctx.fillRect(0,0,this.width,this.height);for(let t=0;t<this.cells.length;t++)for(let i=0;i<this.cells.length;i++){const s=this.cells[t],e=this.cells[i];s!==e&&(this.distance(s.x,s.y,e.x,e.y)<=s.radius+e.radius&&(this.resolveCollision(s,e),s.mass<e.mass?(s.mass-=s.mass>.03?.002:0,e.mass+=e.mass<3?.002:0):(e.mass-=e.mass>.03?.002:0,s.mass+=s.mass<3?.002:0),s.radius=2*s.mass,e.radius=2*e.mass))}this.cells.forEach((t=>{const{x:i,y:s,velocity:e}=t;let l=i+e.x,h=s+e.y;l<t.radius&&(l=t.radius,t.velocity.x=-t.velocity.x),l>=this.width-t.radius&&(l=this.width-t.radius,t.velocity.x=-t.velocity.x),h<t.radius&&(h=t.radius,t.velocity.y=-t.velocity.y),h>=this.height-t.radius&&(h=this.height-t.radius,t.velocity.y=-t.velocity.y),t.x=l,t.y=h,t.velocity.x=t.velocity.x>3?3:t.velocity.x,t.velocity.y=t.velocity.y>3?3:t.velocity.y,this.fill(t),t.mass<.3&&(this.cells=this.cells.filter((i=>i!==t)))})),window.requestAnimationFrame(this.render)}),1e3/this.fps)},randomIntFromInterval(t,i){return Math.floor(Math.random()*(i-t+1)+t)},generateRandom(t){for(let i=0;i<t;i++){const t=1,i=2*t,s=this.randomIntFromInterval(this.cellWidth,this.width-this.cellWidth),e=this.randomIntFromInterval(this.cellHeight,this.height-this.cellHeight),l={x:s,y:e,color:"#888888",velocity:{x:10*Math.random()-5,y:10*Math.random()-5},mass:t,radius:i};if(s<i||s>=this.width-i)return!1;if(e<i||e>=this.height-i)return!1;this.fill(l),this.cells.push(l)}}},mounted(){this.ctx=this.$refs.canvasAI.getContext("2d"),this.generateRandom(200),this.render()},computed:{alive(){return this.cells.length}}}),a=r,c=s(1001),n=(0,c.Z)(a,h,o,!1,null,"55e40994",null),y=n.exports,d={components:{VAi:y}},u=d,x=(0,c.Z)(u,e,l,!1,null,"216496ed",null),v=x.exports}}]);
//# sourceMappingURL=ai.aa87d2ed.js.map